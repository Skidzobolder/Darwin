/*
 * Encoding.cpp
 *
 *  Created on: 21-feb.-2012
 *      Author: woutergl
 */

#include "Encoding.h"

std::string Encoding::RandomData(rapidxml::xml_node<>* geneNode){

	return "base encoding";
}

std::string BinaryEncoding::RandomData(rapidxml::xml_node<>* geneNode){

	int nLow = 0;
	int nHigh = 1;
	int bits = 16;	//default number of random bits

	//check if there is a "bits" attribute in the geneNode
	if(geneNode->first_attribute("bits")){
		bits = atoi(geneNode->first_attribute("bits")->value());
	}

	int bit ;

	std::stringstream ss;//create a stringstream
	for(int i = 0 ; i < bits ; i++){
		bit = (rand() % (nHigh - nLow + 1)) + nLow;
		ss << bit;//add number to the stream
	}

	return ss.str();//return a string with the contents of the stream

}


std::string IntegerEncoding::RandomData(rapidxml::xml_node<>* geneNode){

	int nLow = 0;
	int nHigh = 32767;		//default range of rand()

	//check if there is a "min" attribute in the geneNode
	if(geneNode->first_attribute("min")){
		nLow = atoi(geneNode->first_attribute("min")->value());
	}
	//check if there is a "max" attribute in the geneNode
	if(geneNode->first_attribute("max")){
		nHigh = atoi(geneNode->first_attribute("max")->value());
	}

	int data = (rand() % (nHigh - nLow + 1)) + nLow;

	std::stringstream ss;//create a stringstream
	ss << data;//add number to the stream
	return ss.str();//return a string with the contents of the stream

}

std::string DoubleEncoding::RandomData(rapidxml::xml_node<>* geneNode){

	int nLow = 0;
	int nHigh = 32767;	//default range of rand()
	int nDecimals = 2;

	//check if there is a "min" attribute in the geneNode
	if(geneNode->first_attribute("min")){
		nLow = atoi(geneNode->first_attribute("min")->value());
	}
	//check if there is a "max" attribute in the geneNode
	if(geneNode->first_attribute("max")){
		nHigh = atoi(geneNode->first_attribute("max")->value());
	}

	int data = (rand() % (nHigh - nLow + 1)) + nLow;

	std::stringstream ss;//create a stringstream
	ss << data;//add integer part to the stream

	//check if there is a "decimals" attribute in the geneNode
	if(geneNode->first_attribute("decimals")){
		nDecimals = atoi(geneNode->first_attribute("decimals")->value());
	}

	if(data < nHigh){
			data = (rand() % ((int)pow(10,nDecimals) - 1));
			ss  << "." << data;//add decimal part to the stream
	}

	return ss.str();//return a string with the contents of the stream

}


std::string AlphanumEncoding::RandomData(rapidxml::xml_node<>* geneNode){

	char achAlphanum[] = {"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"};
	//std::vector<char> vChars = {'a'} ;//= {'a',"A","b","B","c","C","d","D","e","E","f","F","g","G","h","H","i","I","j","J","k","K","l","L","m","M","n","N","o","O","p","P","q","Q","r","R","s","S","t","T","u","U","v","V","w","W","x","X","y","Y","z","Z","0","1","2","3","4","5","6","7","8","9"};


	int nLow = 0;
	int nHigh = 61;
	int nMaxChars = 255;



	//check if there is a "maxChars" attribute in the geneNode
	if(geneNode->first_attribute("maxChars")){
		nMaxChars = atoi(geneNode->first_attribute("maxChars")->value());
		int nChars = rand() % nMaxChars;
	}

	std::stringstream ss;//create a stringstream
	for(int j = 0; j < nChars; j++){
		int i = rand() % 62;
		ss << achAlphanum[i];//add character to the stream
	}

	return ss.str();//return a string with the contents of the stream

}

std::string CustomEncoding::RandomData(rapidxml::xml_node<>* geneNode){

	int nLow = 0;
	int nHigh = 100;

	int data = (rand() % (nHigh - nLow + 1)) + nLow;

	   std::stringstream ss;//create a stringstream
	   ss << data;//add number to the stream
	   return ss.str();//return a string with the contents of the stream

}


std::string TreeEncoding::RandomData(rapidxml::xml_node<>* geneNode){

	int nLow = 0;
	int nHigh = 100;

	int data = (rand() % (nHigh - nLow + 1)) + nLow;

	   std::stringstream ss;//create a stringstream
	   ss << data;//add number to the stream
	   return ss.str();//return a string with the contents of the stream

}
